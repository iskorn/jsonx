# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_COMMIT_MESSAGE" = "Update README.md" ]; then
    return;
  elif [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: eojepxzqbzcBlZGeoZuGIfSgVcGjjUz7m5KjbZsasrv7me5BOLCEogp6R6SyZiGsvPdgOnZuU9GByLYq+dQtYyZ+udRBY0QHZHlYSDHJMXQLJzXT9lAV6/Wvxkmpxxyru10SJvDiU4DctZN42guY0/lRMptENEZnvUKGGireBNHVTyyrQbyQTKTaArS5PHbdUs/LRamlMmsRmADyazmmHKT/QEdI2V19FKGE5OUYAExXHYd1n9SZ4atflxSTL4hbmZIUWn+KbaH/7P8pANWX5s4l5ldx5NIJbJg3M3N0Ww9P0i2LbAPqualLopbRCd85EIQie3QwxGd9tHi+dReUiujzWwbNHGmUtWj4g/RFILHu0Y1gk6VIXx3YEtJxzEB4yc0d/9dyoRVKa+eCgGS3qMdNP4EHAw14xKU1CxFiCISuJAsOQYxnenjv/4ukzulbki578EzL9MqOOq9UzN1xp/kPeO+BYcOv0gnQo9AGTZIJYiGHtOTdpGuod1VOeeUaNAHYKCNLccZPoS/sE0ygsh3ZmokwBOhLEduC5xgGrOWi73704XZ6XU5g1yhABeVAKzrD0yX4qNI5TeAyWxx3gmm0WbSUwSteBT0mQQsh1iAAG5v1zWOakqwGHOvHnMVzE+m/m9d6E3DCEjBYghz/Lk0jtu1chcPAXDfCkKcISG4=
  - secure: lVm+iPPXKoWdMEyeSsMO2NXVb5Dx507Q3bOWe95XKtbgscjYHIaZrCresHgzzyDvsFgL7VqmmIcrplyz9iqULioxs/xjex3nb9oBwyKZVrnojs0YXXZNXzjO7VRXz5U5m5ZdvrVyRM/Z7k3WD5hUBbQbSlpSODbj3iwGoWqb9koaihfKAHal7B+IvgRjRK7KOWmbQEwFAAloJ4TPufI9f6pu68zFFXprMfygcWB/v4wYIo7zBx7l1QPb8D63WPhVFK46amb05jCu3vYbL5MbwG86ubxP5GnJGQsk/6PvC0R0aP4WNI0tMC6gK17F321Tkk14KBZmQ3XmmGjLm5sAkNQFXb+JrKwGOxEPxR7A3QHVWxYrDoxhyrso+mcMdGveMPo8xx+TM8GhNcjmjrRk8XFBvcYHtefXmKuU9lgYLXxq9uvf8UkPB7TvbYqSeseKD0mYpQgC4b2ijCwyFDbsgi2aucoNdIF2eaeqHP3+ZpYpbyvhtdIhZinNfX/Hn00UDsnrFbgnf3iJOQ4q7ezNnLNwmGFbXPn8sjM2WGheDU0mYDb17bhR09727PgGGbBJA6XRfv+nlNOpWC0jTtoms/CXV4KcbtbVS2Eub0b0njvj0VGmFjIMvUQJkTbtUod2E2BL60l24EfULrNoBpIY0CyfDcOSt9Q0nJQt3ft0CmI=
  - secure: M5x9ipl2sUgn/G0fxN/HFeaBXP0P7SPiavkKZrY1mhqBLvDnwIJyi3LdunKXSp+A5pADUm8h4zkdtteVmMev26WjoujA0l4UA2ovxduxAb1H20oqOJcvhjNbdrtZ2ORP7IjrekrG27x39tISk0BlB/DoYfNKgmnHuMIXVAa0omYhs1bq6qpc5fO2ts6du5OjWuSzW+bAOEcOWmOCdhUUFkYeG8w5mjDmgS4JnxwGj3InSjL9w+J0H2Z7lCqGqjGNMDkU/1ZLSXYjYVWlN1YxsGnR9wDDO9J+Q9WGMjORBjHO5TuPJ77Gd5esKX2HoI4RMuE+38s+UwjnqG9c64vycahDCWMKfcmkOEhbatucD0Wteh9q55/+DDL2I+WfX2qvWA44d7C4TcVEBuLyyUp/JibLa5xhLHq07yvRQMLxt4J2ef8vWpQ4CCTw4TK0ICCzHbT9TBUZafQuZ0EUPth0mJNMzcsB3KqyjW/EzSAG/aNBWp+Q5KLhXf1zfkKmQ2I+7OESZ3BdE5OxC3fRmWDexvBGkcMgv55JevZONGjBL3MepUpcg6KD7Upului+YNEodgJOaHRu1q2k3aaLBzDQrK0Ypggladv8RR2qWITdFdyFyNpDSpO2kEt7zOghkQAvmQA+c5xj8LL9TgUZrKqLeW90BcPSvTwwzflCW5reX34=
  - secure: UMq7f/1u1iL7p+T3MLL1hIa9r1lefAY8iox6pNk0v1AJFX4EO3/XgAv/PoizQmaM5cMb8A94aWjdvEIKVIpKZNDoWD5MKYp45NeZdKEXt5jmafYK7AzJt+fFLLA5WXblxYVNOZCGT8krGPnmmsUMOF6rS4dYDlNowoZ5+ETqvkX/hPwIDGgyPklLbX+17W2n/5K9PJ9A4eO5Ioa8gMBAnI7kChIT2fKqGcI/snVeNKkbPX0r3yFmRQC43iz20e3i1ZtmQiIrfWsLYK//bjaTbXAgid46gz9kXsFt2iWoTc81I+PxFE1Zl0V0VDeVVm7UAtOm23hhESQRoY6x05P9fTagKPxIxiSUKgEUBEq5yb3vtG9w37NokngKWhdDX5Z/m4nsXDROCWJNjXAJtA12ZsrrKP1AYEZ+8hvnx8h1tgVAHpI5vnG3IOGHRSUjVDTA/Wpzg7gIUmMP29EtPyLCPH8VzW98fMHxX/iiY1PeXgv1Q5gM0OiljTCe5wpAPAQw6iC8kViVjQrBfoV9HBgdxPzWSMTXJrPi/a9ZoNuowdp6gUGVNnmhwqlSUb6ukWJxLOu6bMT6JzkIM2jrrJIsEYMMn66oUY7M+/iOH35i37xcImykITp3HIVjJU3TXpbpEK4/+YA/9cKgOzE1BeHw00OUBePFa3Zkc212A9tIWz8=
  - secure: lP6qOCKeCxX1sDAOljzbrl067SXB2GFNwmG4ZqlHiIikfDuG07T2E8u2fMSQ58eK+XllfhvQLnBCtM+o3RSlIHlm+g70l1iGYiq9EGESLR1BAPyW0y/NlDwwBmynuwFTrYORRy/LD7+AIgVt1cYtDLkzdFfpY5LcwhdgX3zMOio2uz0UUtd1DgT4H2eNlqL2tpZAF7GG22mtI4DI4Kh1MoYqneQ8Q9jrHvtwjRRpJA4kZ4c/uGtcGdApWkgZzH3hXydTrkvWsY08LF4u3j5ogA33yna+VtCsdDxEazSp6F08nWmcDgCX/sNQKb7IuXG3XTvj4JFstaCYLX+HDmKtn9SXnpc3EypXstjGG3JClLokiAhFO3v2ARMUESiKIFinkWnQdRV86ROvtuUFTmDZaGtUb9yTEagSOkNCC2k/SnQIvPU9CKIm3+QoR1++PIr5rOE9LI3ecpYPwLJI4vgl8yot9ZnCP2FtX6gYEAU2NsuzHansUm/CnAz6UnfEIgqRb0XA69kAbMb970Run+478WYTYQ4SM314HeqGoPmVLzVgNudwIr/EQ4h9Bw3i9YS0smgoVt++mGo3u5PRT2KNyi5VRkxqDCf7PHyKcnJyyrshwpXqkVtZQ49i6WrDh8VbTs+gKBR600KPCnZ68tc6mDMumY6xeXa/W2cRNGTKPW8=
  - secure: hUzS+yFHGmOb/s/wQxcluaMQD+rgciB25vCczl75aL0B1YiX+8/wE7LznFvhtjM0O6qlBYjB8La7xsf2JzJbqwTqopPeh3AyZr2bkkknmRzkhwYrUdBxdPOMMR9bka47bpGFdDIAeC2V/zI6Dh14cS6hzqrSK7BXwA6PDH5CpyG/InfUbAkKrZLLrQQT/PgJ8ILUUU9i5vkQtDbT1rwGuPams94H4CVCi1sKzcKKsrWqanltmx8FSsOaESadm4iw/FxkZm3+ai/UiYDt3fJ22blZ0B2BU/p0vt0hPmFTSzhTXtGqEhLmOysxbY/Y3wHlqVC/emFaJhLZ/MQR+JlD+oEvsFp0u5WlONGK/pnmMqWnyk+y97GJSfMRHKfxeOYSFp4wRjWbZOEHxNCeHmFwDE2vnrfWA00ADQ+B7I7w84uARZ/rh+NAeY+wvbT/mpZrUBZSff8rxPbhnK8risHUXrCECSyS17TkYCNcVQxkb4o90D5NUzP/AcTRvKbDq+oCBeiuezCQ/JILpjZJfeK6PRIz88qHwPiel+PfCOJ+a8xXiF9pQTJdKbu+i1jUpH+BkqmuintQ3QOb98yAmcotSINiXWPmXmmj18g2riCyoUXnpcJpTSmhuipVgQ1pz5MUy4o+YIrqMLPJtFtafFlTT7rVDq8ttZE0wysY6oJ08Ps=
  - secure: AFOL0IqNAmZD9n8O1xIXq9GswHh2RTiMInZ3gs5qadIBJQxQH26jUOe9T2VGKfaTtZFqtAj3AWymUyLyW2AiAhxLWbemHd2+v6NQwrISNs9h+SRkyRSJ8NcfZxzyU0Uaeee5Y5b2rwkoRZMZu8wklhHaefKG7tOV94yDX7atZe/9zDc2H7wEGWfhf/FwPMYEqgrPHukRXPjDVxoFA5koz1QRqYDWrzHo6w8jF6yL5vRTz1Nm+0Qwg/E3wzkF2p64PQqdTC3fWjZh4QOL5rQYRpbQqg/cUsya1XtAvFwrk/Qc/pvM67XrjMZQZhcFev34lZqd2cyNUlo4Cu+W7W1o14MdlPsD/5WAZqZ/6ETrbpTNixTkDPf2NA48tz3J0Ufohe6v4bqTiRjB/bTtbqJMmEkXsPltDzgj4GQK739RmzubhSeDjMpeKMZag4KSGGeGOLzch2T4SkMY8CYSc3ffJrf9wESRuM/3ykLw1e1o5Tz0yNBTWjYPFtuFp4fYE+ScKd/7jl75UmwWwEUnJ/7UTiy8mlxwQ1lDiTwLXcHOl4y3jfn9vlMZccQXXB785Er4LTHqz8rDf8qUCK4MouYjQnrI2eMXcHhgyOsLuSqxxWXcnLKeSKR1KTDtPLW56HeadtuxBFZYb3p7CLBdEVz6JaIdRpJSwHAE36OEarurP1I=
